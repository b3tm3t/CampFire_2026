<!DOCTYPE html>
<html>
<head>
    <title>Worm Game 3 GUI</title>
    <style>
        body { font-family: sans-serif; display: flex; flex-direction: column; align-items: center; justify-content: center; height: 100vh; background: #eef2f3;}
        .card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1); text-align: center; }
        button { padding: 10px 20px; cursor: pointer; background: #2ecc71; color: white; border: none; border-radius: 5px; font-size: 1.1rem;}
        button:hover {background: #27ae60}
        canvas { background:#000; display: none; border-radius: 10px;}
    </style>
</head>
<body>
    
    <div class="card">
        <h1 id="message">Worm Game 3</h1>
        <button id="startBtn">Start Game</button>
        <canvas id="gameCanvas"></canvas>
    </div>
    
    <script type="module">
        // 1. IMPORT: This pulls the code from your other file
        import {Player} from './Player.js';
        
        // 2. SETUP
        const myButton = document.getElementById('startBtn');
        const myTitle = document.getElementById('message');
        const mainCanvas = document.getElementById('gameCanvas');
        const ctx = mainCanvas.getContext('2d');
        const keys = {};
        
        // 3. CREATE PLAYER 
        // We use the 5 arguments your class requires: (x, y, speed, width, health)
        const worm = new Player(700, 400, 5, 30, 100);
        
        // 4. INPUTS
        window.addEventListener('keydown', (e) => keys[e.key] = true);
        window.addEventListener('keyup', (e) => keys[e.key] = false);
        
        // 5. GAME LOOP
        function gameLoop() {
            ctx.clearRect(0, 0, mainCanvas.width, mainCanvas.height);
            
            // Call ALL three methods in order
            worm.calculateAngle(keys);
            worm.calculateVelocity(keys);
            worm.updatePos(canvasHeight, canvasWidth); 
            
            worm.draw(ctx);
            
            // Text displays
            ctx.fillStyle = "white";
            ctx.font = "24px sans-serif";
            ctx.fillText(`Angle: ${worm.currentAngle.toFixed(2) * 180/ Math.PI}`, 20, 40);
            ctx.fillText(`Velocity: ${worm.forwardVelocity}`, 20, 70);

            ctx.fillText(`Desired angle: ${worm.desiredAngle.toFixed(2)}`, 20, 100);
            
            requestAnimationFrame(gameLoop);
        }
        
        // 6. START BUTTON
        myButton.addEventListener('click', () => {
            myButton.style.display = 'none';
            myTitle.innerText = "Game Running";
            mainCanvas.width = 1400;
            mainCanvas.height = 800;
            mainCanvas.style.display = 'block';
            gameLoop();
        });
    </script>
</body>
</html>